import{UpdateComponent,isFieldNotEmpty}from"./container/UpdateComponent.js";function TaskComponent(task,date){let li=document.createElement("li"),taskContent=document.createElement("p"),dateContent=document.createElement("p"),taskSection=document.createElement("section"),buttonSection=document.createElement("section"),updateButton=document.createElement("button"),deleteButton=document.createElement("button"),updateSection=UpdateComponent(li);return li.setAttribute("class","task"),taskContent.setAttribute("id","task-content"),dateContent.setAttribute("id","date-content"),taskSection.setAttribute("class","task-section"),buttonSection.setAttribute("class","button-section"),updateButton.setAttribute("id","update-button"),deleteButton.setAttribute("id","delete-button"),taskContent.textContent=task,dateContent.textContent=date,updateButton.textContent="Update",deleteButton.textContent="Delete",addRemoveEvent(deleteButton,li),addUpdateEvent(updateButton,updateSection,li),taskSection.appendChild(taskContent),taskSection.appendChild(dateContent),buttonSection.appendChild(updateButton),buttonSection.appendChild(deleteButton),li.appendChild(taskSection),li.appendChild(buttonSection),li.appendChild(updateSection),li}function addRemoveEvent(button,anotherElem){button.addEventListener("click",()=>{anotherElem.remove()})}function addUpdateEvent(button,updateSection,li){button.addEventListener("click",()=>{updateSection.style.display="flex",updateSection.childNodes[0].lastChild.value=li.childNodes[0].firstChild.textContent,updateSection.childNodes[1].lastChild.value=parseDate(li.childNodes[0].lastChild.textContent)})}function parseDate(date){let newDate=String(date).split("-");return`${newDate[0]}-${newDate[1]}-${newDate[2]}`}function addTask(){let task=document.querySelector("#textbox"),date=document.querySelector("#date");return new Promise((resolve,reject)=>{isFieldNotEmpty(task)&&isFieldNotEmpty(date)&&(resolve({message:"Task added successfully!",task:task.value,date:date.value}),task.value="",date.value=""),reject("Please fill up the required fields.")})}function showMessage(message,color){let successMessage=document.querySelector("#adding-message");successMessage.style.color=color,successMessage.textContent=message,successMessage.style.display="block"}function hideMessage(){let successMessage;document.querySelector("#adding-message").style.display="none"}async function createTask(){try{let ul=document.querySelector("#tasks"),{message:message,task:task,date:date}=await addTask();showMessage(message,"#5cb85c"),ul.appendChild(TaskComponent(task,date)),setTimeout(()=>{hideMessage()},2e3)}catch(err){showMessage(err,"#d9534f")}}document.querySelector("#add-button").addEventListener("click",()=>{createTask()});